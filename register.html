<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Register ‚Äì DentalLink Morocco</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;800&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
<style>
:root{--primary:#2563eb;--primary-dark:#1e40af;--secondary:#0891b2;--dark:#1e293b;--accent:#06b6d4;--light-bg:#f1f5f9;--white:#fff;--text-dark:#334155;--err:#ef4444;--ok:#22c55e}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Outfit',sans-serif;background:var(--light-bg);color:var(--text-dark);min-height:100vh}

/* ‚îÄ‚îÄ nav ‚îÄ‚îÄ */
nav{position:fixed;top:0;width:100%;z-index:1000;background:rgba(255,255,255,.97);backdrop-filter:blur(10px);padding:1rem 5%;border-bottom:1px solid rgba(37,99,235,.15);box-shadow:0 2px 12px rgba(0,0,0,.06)}
.nav-inner{max-width:1400px;margin:0 auto;display:flex;justify-content:space-between;align-items:center}
.logo{font-family:'Playfair Display',serif;font-size:1.7rem;font-weight:900;color:var(--primary);text-decoration:none}
.nav-right{display:flex;align-items:center;gap:2rem}
.nav-links{display:flex;gap:2rem;list-style:none}
.nav-links a{color:var(--text-dark);text-decoration:none;font-weight:500;font-size:.95rem;transition:color .3s}
.nav-links a:hover,.nav-links a.active{color:var(--primary)}
.language-switcher{display:flex;background:var(--light-bg);padding:.35rem;border-radius:50px}
.lang-btn{padding:.4rem .9rem;border:none;background:transparent;color:var(--text-dark);font-weight:600;font-size:.85rem;cursor:pointer;border-radius:50px;font-family:'Outfit',sans-serif;transition:all .3s}
.lang-btn.active{background:var(--primary);color:#fff}
.lang-btn:hover:not(.active){background:rgba(37,99,235,.1)}

/* ‚îÄ‚îÄ page hero ‚îÄ‚îÄ */
.reg-hero{padding:7.5rem 5% 2.5rem;background:linear-gradient(135deg,#eff6ff,#e0f2fe);text-align:center}
.reg-hero h1{font-family:'Playfair Display',serif;font-size:2.9rem;color:var(--dark);margin-bottom:.6rem}
.reg-hero p{font-size:1.1rem;color:#64748b;max-width:560px;margin:0 auto}

/* ‚îÄ‚îÄ stepper ‚îÄ‚îÄ */
.stepper{display:flex;justify-content:center;gap:0;max-width:720px;margin:2rem auto 0;position:relative}
.stepper::before{content:'';position:absolute;top:18px;left:16%;right:16%;height:3px;background:#e2e8f0;z-index:0}
.step-dot-wrap{display:flex;flex-direction:column;align-items:center;flex:1;position:relative;z-index:1}
.step-dot{width:36px;height:36px;border-radius:50%;background:#e2e8f0;border:3px solid #fff;box-shadow:0 2px 8px rgba(0,0,0,.1);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.9rem;color:#94a3b8;transition:all .4s}
.step-dot.done{background:var(--primary);color:#fff;box-shadow:0 2px 12px rgba(37,99,235,.35)}
.step-dot.active{background:var(--primary);color:#fff;box-shadow:0 0 0 4px rgba(37,99,235,.2)}
.step-label{margin-top:.4rem;font-size:.75rem;font-weight:600;color:#94a3b8;text-align:center;max-width:90px}
.step-label.active,.step-label.done{color:var(--primary)}

/* ‚îÄ‚îÄ form wrapper ‚îÄ‚îÄ */
.form-wrap{max-width:720px;margin:2rem auto 3rem;padding:0 5%}
.form-section{display:none}
.form-section.active{display:block}

/* ‚îÄ‚îÄ card ‚îÄ‚îÄ */
.card{background:#fff;border-radius:20px;box-shadow:0 4px 24px rgba(0,0,0,.07);padding:2.2rem 2rem;margin-bottom:1.5rem}
.card-title{font-family:'Playfair Display',serif;font-size:1.35rem;color:var(--dark);margin-bottom:1.2rem;padding-bottom:.7rem;border-bottom:2px solid var(--light-bg)}

/* ‚îÄ‚îÄ field ‚îÄ‚îÄ */
.field{margin-bottom:1.3rem}
.field label{display:block;font-size:.88rem;font-weight:600;color:var(--dark);margin-bottom:.4rem}
.field input,.field select,.field textarea{
    width:100%;padding:.75rem 1rem;border:2px solid #e2e8f0;border-radius:12px;
    font-family:'Outfit',sans-serif;font-size:.95rem;color:var(--dark);
    background:#fff;transition:border-color .3s,box-shadow .3s;
}
.field input:focus,.field select:focus,.field textarea:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(37,99,235,.12)}
.field textarea{resize:vertical;min-height:80px}
.field .hint{font-size:.78rem;color:#94a3b8;margin-top:.3rem}
.field.err input,.field.err select,.field.err textarea{border-color:var(--err)}
.field .err-msg{font-size:.78rem;color:var(--err);margin-top:.3rem;display:none}
.field.err .err-msg{display:block}

/* ‚îÄ‚îÄ two col ‚îÄ‚îÄ */
.two-col{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
@media(max-width:520px){.two-col{grid-template-columns:1fr}}

/* ‚îÄ‚îÄ services checkboxes ‚îÄ‚îÄ */
.services-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:.6rem}
.svc-check{display:flex;align-items:center;gap:.5rem;padding:.55rem .7rem;border:2px solid #e2e8f0;border-radius:10px;cursor:pointer;transition:all .25s;user-select:none}
.svc-check:hover{border-color:rgba(37,99,235,.3);background:#f8fafc}
.svc-check.checked{border-color:var(--primary);background:rgba(37,99,235,.06)}
.svc-check .tick{width:18px;height:18px;border-radius:4px;border:2px solid #cbd5e1;display:flex;align-items:center;justify-content:center;font-size:.75rem;transition:all .25s;flex-shrink:0}
.svc-check.checked .tick{background:var(--primary);border-color:var(--primary);color:#fff}

/* ‚îÄ‚îÄ image upload zone ‚îÄ‚îÄ */
.img-upload-row{display:grid;grid-template-columns:repeat(4,1fr);gap:.7rem}
.img-slot{aspect-ratio:1;border:2px dashed #cbd5e1;border-radius:12px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:all .25s;position:relative;overflow:hidden;background:#fafafa}
.img-slot:hover{border-color:var(--primary);background:#eff6ff}
.img-slot .slot-icon{font-size:1.6rem;opacity:.45}
.img-slot .slot-label{font-size:.72rem;color:#94a3b8;margin-top:.25rem}
.img-slot input[type=file]{position:absolute;inset:0;opacity:0;cursor:pointer}
.img-slot .preview{position:absolute;inset:0;background-size:cover;background-position:center;border-radius:10px}
.img-slot .remove-img{position:absolute;top:4px;right:4px;background:rgba(0,0,0,.55);color:#fff;border:none;width:22px;height:22px;border-radius:50%;cursor:pointer;font-size:.85rem;display:none;align-items:center;justify-content:center;z-index:2}
.img-slot.has-img .remove-img{display:flex}
.img-slot.has-img .slot-icon,.img-slot.has-img .slot-label{display:none}

/* ‚îÄ‚îÄ nav buttons ‚îÄ‚îÄ */
.form-nav{display:flex;justify-content:space-between;margin-top:1.8rem}
.btn{padding:.7rem 2rem;border:none;border-radius:50px;font-family:'Outfit',sans-serif;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .3s}
.btn-back{background:var(--light-bg);color:var(--text-dark)}
.btn-back:hover{background:#e2e8f0}
.btn-next,.btn-submit{background:var(--primary);color:#fff;box-shadow:0 4px 16px rgba(37,99,235,.3)}
.btn-next:hover,.btn-submit:hover{background:var(--primary-dark);transform:translateY(-2px)}
.btn-submit{padding:.78rem 2.4rem;font-size:1rem}

/* ‚îÄ‚îÄ success screen ‚îÄ‚îÄ */
.success-screen{display:none;text-align:center;padding:4rem 2rem}
.success-screen.active{display:block}
.success-icon{font-size:5rem;margin-bottom:1rem}
.success-screen h2{font-family:'Playfair Display',serif;font-size:2rem;color:var(--dark);margin-bottom:.8rem}
.success-screen p{color:#64748b;font-size:1.05rem;max-width:480px;margin:0 auto 2rem}
.success-btns{display:flex;justify-content:center;gap:1rem;flex-wrap:wrap}

/* ‚îÄ‚îÄ footer ‚îÄ‚îÄ */
footer{background:var(--white);padding:2rem 5%;border-top:1px solid rgba(37,99,235,.15);text-align:center}
footer p{color:#94a3b8;font-size:.85rem}
</style>
</head>
<body>

<!-- nav -->
<nav><div class="nav-inner">
  <a href="index.html" class="logo">DentalLink</a>
  <div class="nav-right">
    <ul class="nav-links">
      <li><a href="index.html"        data-en="Home"         data-fr="Accueil">Home</a></li>
      <li><a href="lab-profiles.html"  data-en="Lab Profiles" data-fr="Profils des Labos">Lab Profiles</a></li>
      <li><a href="map.html"           data-en="Map"          data-fr="Carte">Map</a></li>
      <li><a href="register.html"      data-en="Register"     data-fr="S'inscrire" class="active">Register</a></li>
    </ul>
    <div class="language-switcher">
      <button class="lang-btn active" data-lang="en">EN</button>
      <button class="lang-btn"        data-lang="fr">FR</button>
    </div>
  </div>
</div></nav>

<!-- hero -->
<section class="reg-hero">
  <h1 data-en="Register Your Lab" data-fr="Inscrivez Votre Laboratoire">Register Your Lab</h1>
  <p data-en="Complete the steps below to create your lab profile and appear on the map." data-fr="Compl√©tez les √©tapes ci-dessous pour cr√©er votre profil et appara√Ætre sur la carte.">Complete the steps below to create your lab profile and appear on the map.</p>
</section>

<!-- stepper -->
<div class="stepper">
  <div class="step-dot-wrap">
    <div class="step-dot active" id="dot0">1</div>
    <div class="step-label active" id="lbl0" data-en="Lab Info" data-fr="Info du Labo">Lab Info</div>
  </div>
  <div class="step-dot-wrap">
    <div class="step-dot" id="dot1">2</div>
    <div class="step-label" id="lbl1" data-en="Services" data-fr="Services">Services</div>
  </div>
  <div class="step-dot-wrap">
    <div class="step-dot" id="dot2">3</div>
    <div class="step-label" id="lbl2" data-en="Photos" data-fr="Photos">Photos</div>
  </div>
  <div class="step-dot-wrap">
    <div class="step-dot" id="dot3">4</div>
    <div class="step-label" id="lbl3" data-en="Review" data-fr="V√©rifier">Review</div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê FORM ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="form-wrap">

  <!-- STEP 0 ‚Äì Lab Info -->
  <div class="form-section active" id="sec0">
    <div class="card">
      <div class="card-title" data-en="Laboratory Information" data-fr="Informations du Laboratoire">Laboratory Information</div>
      <div class="two-col">
        <div class="field" id="f-labName">
          <label data-en="Lab Name *" data-fr="Nom du Labo *">Lab Name *</label>
          <input type="text" id="labName" autocomplete="off">
          <div class="err-msg" data-en="Required" data-fr="Obligatoire">Required</div>
        </div>
        <div class="field" id="f-manager">
          <label data-en="Manager Name *" data-fr="Nom du G√©rant *">Manager Name *</label>
          <input type="text" id="manager" autocomplete="off">
          <div class="err-msg" data-en="Required" data-fr="Obligatoire">Required</div>
        </div>
      </div>
      <div class="two-col">
        <div class="field" id="f-phone">
          <label data-en="Phone *" data-fr="T√©l√©phone *">Phone *</label>
          <input type="tel" id="phone" placeholder="+212 5xx xxx xxx">
          <div class="err-msg" data-en="Required" data-fr="Obligatoire">Required</div>
        </div>
        <div class="field" id="f-email">
          <label data-en="Email *" data-fr="Email *">Email *</label>
          <input type="email" id="email" placeholder="lab@example.ma">
          <div class="err-msg" data-en="Valid email required" data-fr="Email valide requis">Valid email required</div>
        </div>
      </div>
      <div class="field" id="f-address">
        <label data-en="Full Address *" data-fr="Adresse Compl√®te *">Full Address *</label>
        <input type="text" id="address">
        <div class="err-msg" data-en="Required" data-fr="Obligatoire">Required</div>
      </div>
      <div class="field" id="f-city">
        <label data-en="City *" data-fr="Ville *">City *</label>
        <select id="city">
          <option value="" data-en="‚Äî Select city ‚Äî" data-fr="‚Äî Choisir une ville ‚Äî">‚Äî Select city ‚Äî</option>
          <option value="Casablanca">Casablanca</option>
          <option value="Rabat">Rabat</option>
          <option value="Marrakech">Marrakech</option>
          <option value="Fes">Fes</option>
          <option value="Tangier">Tangier</option>
          <option value="Agadir">Agadir</option>
          <option value="Meknes">Meknes</option>
          <option value="Oujda">Oujda</option>
          <option value="Kenitra">Kenitra</option>
          <option value="Tetouan">Tetouan</option>
        </select>
        <div class="err-msg" data-en="Please select a city" data-fr="Veuillez choisir une ville">Please select a city</div>
      </div>
      <div class="two-col">
        <div class="field">
          <label data-en="Instagram (optional)" data-fr="Instagram (optionnel)">Instagram (optional)</label>
          <input type="text" id="instagram" placeholder="@yourlab">
        </div>
        <div class="field">
          <label data-en="Website (optional)" data-fr="Site Web (optionnel)">Website (optional)</label>
          <input type="text" id="website" placeholder="yourlab.ma">
        </div>
      </div>
    </div>
    <div class="form-nav">
      <span></span>
      <button class="btn btn-next" onclick="goTo(1)" data-en="Next ‚Üí" data-fr="Suivant ‚Üí">Next ‚Üí</button>
    </div>
  </div>

  <!-- STEP 1 ‚Äì Services -->
  <div class="form-section" id="sec1">
    <div class="card">
      <div class="card-title" data-en="Services Offered *" data-fr="Services Propos√©s *">Services Offered *</div>
      <p style="font-size:.85rem;color:#64748b;margin-bottom:1rem" data-en="Select at least one service your lab provides." data-fr="S√©lectionnez au moins un service que votre laboratoire offre.">Select at least one service your lab provides.</p>
      <div class="services-grid" id="svcGrid"></div>
      <div class="err-msg" id="svcErr" style="display:none;margin-top:.6rem" data-en="Select at least one service" data-fr="S√©lectionnez au moins un service">Select at least one service</div>
    </div>
    <div class="form-nav">
      <button class="btn btn-back" onclick="goTo(0)" data-en="‚Üê Back" data-fr="‚Üê Retour">‚Üê Back</button>
      <button class="btn btn-next" onclick="goTo(2)" data-en="Next ‚Üí" data-fr="Suivant ‚Üí">Next ‚Üí</button>
    </div>
  </div>

  <!-- STEP 2 ‚Äì Photos -->
  <div class="form-section" id="sec2">
    <div class="card">
      <div class="card-title" data-en="Upload Photos" data-fr="T√©l√©charger des Photos">Upload Photos</div>
      <p style="font-size:.85rem;color:#64748b;margin-bottom:1rem" data-en="Upload up to 4 photos of your lab (optional)." data-fr="T√©l√©chargez jusqu'√† 4 photos de votre laboratoire (optionnel).">Upload up to 4 photos of your lab (optional).</p>
      <div class="img-upload-row" id="imgRow"></div>
    </div>
    <div class="form-nav">
      <button class="btn btn-back" onclick="goTo(1)" data-en="‚Üê Back" data-fr="‚Üê Retour">‚Üê Back</button>
      <button class="btn btn-next" onclick="goTo(3)" data-en="Next ‚Üí" data-fr="Suivant ‚Üí">Next ‚Üí</button>
    </div>
  </div>

  <!-- STEP 3 ‚Äì Review -->
  <div class="form-section" id="sec3">
    <div class="card">
      <div class="card-title" data-en="Review Your Information" data-fr="V√©rifiez Vos Informations">Review Your Information</div>
      <div id="reviewBody"></div>
    </div>
    <div class="form-nav">
      <button class="btn btn-back" onclick="goTo(2)" data-en="‚Üê Back" data-fr="‚Üê Retour">‚Üê Back</button>
      <button class="btn btn-submit" onclick="submitLab()" data-en="‚úì Register Lab" data-fr="‚úì Inscrire le Labo">‚úì Register Lab</button>
    </div>
  </div>

  <!-- SUCCESS -->
  <div class="success-screen" id="successScreen">
    <div class="success-icon">üéâ</div>
    <h2 data-en="Lab Registered!" data-fr="Laboratoire Enregistr√© !">Lab Registered!</h2>
    <p data-en="Your lab is now live on the profiles page and the map. Other dentists can find you now." data-fr="Votre laboratoire est maintenant en ligne sur la page des profils et la carte. Les autres dentistes peuvent vous trouver.">Your lab is now live on the profiles page and the map. Other dentists can find you now.</p>
    <div class="success-btns">
      <a href="lab-profiles.html" class="btn btn-next" data-en="View Profiles" data-fr="Voir les Profils">View Profiles</a>
      <a href="map.html"          class="btn btn-next" data-en="View Map"      data-fr="Voir la Carte">View Map</a>
    </div>
  </div>
</div>

<footer><p data-en="¬© 2024 DentalLink Morocco. All rights reserved." data-fr="¬© 2024 DentalLink Maroc. Tous droits r√©serv√©s.">¬© 2024 DentalLink Morocco. All rights reserved.</p></footer>

<script>
// ‚îÄ‚îÄ‚îÄ services master list ‚îÄ‚îÄ‚îÄ
const SERVICES = [
  {en:"Crowns",fr:"Couronnes"},{en:"Veneers",fr:"Facettes"},{en:"Implants",fr:"Implants"},
  {en:"Orthodontics",fr:"Orthodontie"},{en:"Bridges",fr:"Bridges"},{en:"Dentures",fr:"Proth√®ses"},
  {en:"Prosthodontics",fr:"Prosthodontie"},{en:"Ceramic Work",fr:"C√©ramique"},
  {en:"Cosmetic Dentistry",fr:"Dentisterie Esth√©tique"},{en:"Whitening",fr:"Blanchiment"},
  {en:"Digital Scanning",fr:"Scanner Num√©rique"},{en:"CAD/CAM",fr:"CAD/CAM"},
  {en:"3D Printing",fr:"Impression 3D"},{en:"Zirconia Crowns",fr:"Couronnes en Zircone"},
  {en:"Night Guards",fr:"Goutti√®res Nocturnes"},{en:"Sports Guards",fr:"Prot√®ge-Dents"},
  {en:"Clear Aligners",fr:"Goutti√®res Invisibles"},{en:"Retainers",fr:"Contentions"},
  {en:"Orthodontic Appliances",fr:"Appareils Orthodontiques"},{en:"Removable Prosthodontics",fr:"Proth√®ses Amovibles"}
];

// ‚îÄ‚îÄ‚îÄ state ‚îÄ‚îÄ‚îÄ
let lang = 'en';
let checkedSvcs = [];          // indices into SERVICES
let images = [null,null,null,null]; // base64 or null

// ‚îÄ‚îÄ‚îÄ render services grid ‚îÄ‚îÄ‚îÄ
function renderSvcs(){
  const g = document.getElementById('svcGrid');
  g.innerHTML = '';
  SERVICES.forEach((s,i)=>{
    const el = document.createElement('div');
    el.className = 'svc-check' + (checkedSvcs.includes(i)?' checked':'');
    el.innerHTML = `<div class="tick">‚úì</div><span>${s[lang]}</span>`;
    el.addEventListener('click',(e)=>{
      e.preventDefault();
      const idx = checkedSvcs.indexOf(i);
      idx===-1 ? checkedSvcs.push(i) : checkedSvcs.splice(idx,1);
      renderSvcs();
    });
    g.appendChild(el);
  });
}

// ‚îÄ‚îÄ‚îÄ render image upload slots ‚îÄ‚îÄ‚îÄ
function renderImgSlots(){
  const row = document.getElementById('imgRow');
  row.innerHTML = '';
  for(let i=0;i<4;i++){
    const slot = document.createElement('div');
    slot.className = 'img-slot' + (images[i]?' has-img':'');
    if(images[i]){
      slot.innerHTML = `<div class="preview" style="background-image:url(${images[i]})"></div><button class="remove-img" onclick="removeImg(${i},event)">√ó</button>`;
    } else {
      slot.innerHTML = `<input type="file" accept="image/*" onchange="handleImg(${i},event)"><div class="slot-icon">üì∑</div><div class="slot-label" data-en="Photo ${i+1}" data-fr="Photo ${i+1}">Photo ${i+1}</div>`;
    }
    row.appendChild(slot);
  }
  applyLang(lang); // re-translate slot labels
}

function handleImg(i,e){
  const file = e.target.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = v => { images[i]=v.target.result; renderImgSlots(); };
  reader.readAsDataURL(file);
}
function removeImg(i,e){
  e.stopPropagation();
  images[i]=null;
  renderImgSlots();
}

// ‚îÄ‚îÄ‚îÄ validation ‚îÄ‚îÄ‚îÄ
function validateStep0(){
  let ok=true;
  const checks = [
    ['f-labName','labName', v=>v.trim().length>0],
    ['f-manager','manager', v=>v.trim().length>0],
    ['f-phone','phone',     v=>v.trim().length>0],
    ['f-email','email',     v=>v.trim().length>0 && /^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(v.trim())],
    ['f-address','address', v=>v.trim().length>0],
    ['f-city','city',       v=>v!=='']
  ];
  checks.forEach(([fId,inId,test])=>{
    const f=document.getElementById(fId);
    const val=document.getElementById(inId).value;
    if(!test(val)){f.classList.add('err');ok=false}else{f.classList.remove('err')}
  });
  return ok;
}
function validateStep1(){
  const err=document.getElementById('svcErr');
  if(checkedSvcs.length===0){err.style.display='block';return false}
  err.style.display='none';return true;
}

// ‚îÄ‚îÄ‚îÄ step navigation ‚îÄ‚îÄ‚îÄ
let currentStep=0;
function goTo(n){
  if(n>currentStep){ // going forward ‚Äì validate current
    if(currentStep===0 && !validateStep0()) return;
    if(currentStep===1 && !validateStep1()) return;
  }
  document.getElementById('sec'+currentStep).classList.remove('active');
  currentStep=n;
  document.getElementById('sec'+currentStep).classList.add('active');
  updateStepper();
  if(n===3) buildReview();
}
function updateStepper(){
  for(let i=0;i<4;i++){
    const dot=document.getElementById('dot'+i);
    const lbl=document.getElementById('lbl'+i);
    dot.className='step-dot'+(i<currentStep?' done':(i===currentStep?' active':''));
    lbl.className='step-label'+(i<=currentStep?' active':'');
  }
}

// ‚îÄ‚îÄ‚îÄ build review card ‚îÄ‚îÄ‚îÄ
function buildReview(){
  const t = {
    en:{name:"Lab Name",mgr:"Manager",phone:"Phone",email:"Email",addr:"Address",city:"City",ig:"Instagram",web:"Website",svcs:"Services",photos:"Photos",none:"None"},
    fr:{name:"Nom du Labo",mgr:"G√©rant",phone:"T√©l√©phone",email:"Email",addr:"Adresse",city:"Ville",ig:"Instagram",web:"Site Web",svcs:"Services",photos:"Photos",none:"Aucun"}
  }[lang];

  const vals = getFormVals();
  let html = `
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:.7rem .5rem;font-size:.9rem">
      <div style="color:#94a3b8;font-weight:600">${t.name}</div><div style="font-weight:600;color:var(--dark)">${vals.name}</div>
      <div style="color:#94a3b8;font-weight:600">${t.mgr}</div><div>${vals.manager}</div>
      <div style="color:#94a3b8;font-weight:600">${t.phone}</div><div>${vals.phone}</div>
      <div style="color:#94a3b8;font-weight:600">${t.email}</div><div>${vals.email}</div>
      <div style="color:#94a3b8;font-weight:600">${t.addr}</div><div>${vals.address}</div>
      <div style="color:#94a3b8;font-weight:600">${t.city}</div><div>${vals.city}</div>
      <div style="color:#94a3b8;font-weight:600">${t.ig}</div><div>${vals.instagram||t.none}</div>
      <div style="color:#94a3b8;font-weight:600">${t.web}</div><div>${vals.website||t.none}</div>
    </div>`;

  // services
  html += `<div style="margin-top:1.2rem"><div style="color:#94a3b8;font-weight:600;font-size:.85rem;margin-bottom:.5rem">${t.svcs}</div><div style="display:flex;flex-wrap:wrap;gap:.4rem">`;
  checkedSvcs.forEach(i=>{ html+=`<span style="padding:.3rem .8rem;background:rgba(37,99,235,.08);color:var(--primary);border-radius:20px;font-size:.82rem">${SERVICES[i][lang]}</span>`; });
  html += `</div></div>`;

  // photos
  const hasPhoto = images.some(Boolean);
  html += `<div style="margin-top:1.2rem"><div style="color:#94a3b8;font-weight:600;font-size:.85rem;margin-bottom:.5rem">${t.photos}</div>`;
  if(hasPhoto){
    html += `<div style="display:grid;grid-template-columns:repeat(4,1fr);gap:.5rem">`;
    images.forEach(img=>{
      html += img
        ? `<div style="aspect-ratio:1;background:url(${img}) center/cover;border-radius:10px;border:2px solid #e2e8f0"></div>`
        : `<div style="aspect-ratio:1;background:#f1f5f9;border-radius:10px;border:2px dashed #cbd5e1;display:flex;align-items:center;justify-content:center;color:#cbd5e1;font-size:1.3rem">‚Äî</div>`;
    });
    html += `</div>`;
  } else {
    html += `<span style="color:#94a3b8;font-size:.88rem">${t.none}</span>`;
  }
  html += `</div>`;

  document.getElementById('reviewBody').innerHTML = html;
}

// ‚îÄ‚îÄ‚îÄ collect form values ‚îÄ‚îÄ‚îÄ
function getFormVals(){
  return {
    name:    document.getElementById('labName').value.trim(),
    manager: document.getElementById('manager').value.trim(),
    phone:   document.getElementById('phone').value.trim(),
    email:   document.getElementById('email').value.trim(),
    address: document.getElementById('address').value.trim(),
    city:    document.getElementById('city').value,
    instagram: document.getElementById('instagram').value.trim(),
    website:   document.getElementById('website').value.trim()
  };
}

// ‚îÄ‚îÄ‚îÄ SUBMIT ‚îÄ‚îÄ‚îÄ
function submitLab(){
  const vals = getFormVals();
  const lab = {
    id: Date.now(),
    name: vals.name,
    manager: vals.manager,
    phone: vals.phone,
    email: vals.email,
    address: vals.address,
    city: vals.city,
    instagram: vals.instagram ? (vals.instagram.startsWith('@')?vals.instagram:'@'+vals.instagram) : '',
    website: vals.website,
    services: checkedSvcs.map(i=>SERVICES[i]),  // each {en,fr}
    images: images  // base64 or null
  };

  // persist
  let labs = JSON.parse(localStorage.getItem('dentallink_labs') || '[]');
  labs.push(lab);
  localStorage.setItem('dentallink_labs', JSON.stringify(labs));

  // show success
  document.getElementById('sec3').classList.remove('active');
  document.getElementById('successScreen').classList.add('active');
}

// ‚îÄ‚îÄ‚îÄ i18n ‚îÄ‚îÄ‚îÄ
function applyLang(l){
  lang=l;
  document.querySelectorAll('[data-en][data-fr]').forEach(el=>{
    const v=el.getAttribute('data-'+l);
    if(!v) return;
    if(el.tagName==='INPUT') el.placeholder=v;
    else if(el.tagName==='OPTION') el.textContent=v;
    else el.textContent=v;
  });
  document.querySelectorAll('.lang-btn').forEach(b=> b.classList.toggle('active', b.dataset.lang===l));
  renderSvcs();
  if(currentStep===2) renderImgSlots();
  if(currentStep===3) buildReview();
}
document.querySelectorAll('.lang-btn').forEach(b=> b.addEventListener('click',()=> applyLang(b.dataset.lang)));

// ‚îÄ‚îÄ‚îÄ init ‚îÄ‚îÄ‚îÄ
renderSvcs();
renderImgSlots();
</script>
</body>
</html>
